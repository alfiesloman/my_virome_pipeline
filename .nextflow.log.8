Oct-22 12:17:26.087 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --input_dir /users/as3243/scratch/test_prep --outdir results_20251022_121724 -profile slurm -resume
Oct-22 12:17:26.163 [main] DEBUG nextflow.cli.CmdRun - N E X T F L O W  ~  version 25.04.6
Oct-22 12:17:26.180 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/users/as3243/.nextflow/plugins; core-plugins: nf-amazon@2.15.0,nf-azure@1.16.0,nf-cloudcache@0.4.3,nf-codecommit@0.2.3,nf-console@1.2.1,nf-google@1.21.1,nf-k8s@1.0.0,nf-tower@1.11.4,nf-wave@1.12.1
Oct-22 12:17:26.207 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Oct-22 12:17:26.208 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Oct-22 12:17:26.210 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Oct-22 12:17:26.222 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Oct-22 12:17:26.240 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /users/as3243/my_virome_pipeline/nextflow.config
Oct-22 12:17:26.243 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /users/as3243/my_virome_pipeline/nextflow.config
Oct-22 12:17:26.270 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /users/as3243/.nextflow/secrets/store.json
Oct-22 12:17:26.273 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@2bc12da] - activable => nextflow.secret.LocalSecretsProvider@2bc12da
Oct-22 12:17:26.288 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `slurm`
Oct-22 12:17:27.039 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [slurm, debug, test, mamba, conda, viking2]
Oct-22 12:17:27.079 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declaration
Oct-22 12:17:27.096 [main] DEBUG nextflow.cli.CmdRun - Launching `main.nf` [nostalgic_cantor] DSL2 - revision: 353b3cafaa
Oct-22 12:17:27.098 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Oct-22 12:17:27.098 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Oct-22 12:17:27.148 [main] DEBUG nextflow.Session - Session UUID: 398f7d2b-7bdf-4eb6-bb41-cf1187c737ca
Oct-22 12:17:27.149 [main] DEBUG nextflow.Session - Run name: nostalgic_cantor
Oct-22 12:17:27.150 [main] DEBUG nextflow.Session - Executor pool size: 4
Oct-22 12:17:27.164 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Oct-22 12:17:27.168 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=12; workQueue=LinkedBlockingQueue[-1]; allowCoreThreadTimeout=false
Oct-22 12:17:27.193 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 25.04.6 build 5954
  Created: 01-07-2025 11:27 UTC (12:27 BST)
  System: Linux 4.18.0-553.56.1.el8_10.x86_64
  Runtime: Groovy 4.0.26 on OpenJDK 64-Bit Server VM 21.0.2+13-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 462048@login2.viking2.yor.alces.network [10.10.0.22]
  CPUs: 4 - Mem: 24 GB (10.9 GB) - Swap: 16 GB (14.9 GB)
Oct-22 12:17:27.226 [main] DEBUG nextflow.Session - Work-dir: /users/as3243/my_virome_pipeline/work [nfs]
Oct-22 12:17:27.244 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Oct-22 12:17:27.252 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Oct-22 12:17:27.273 [main] DEBUG nextflow.Session - Observer factory (v2): LinObserverFactory
Oct-22 12:17:27.296 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Oct-22 12:17:27.304 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 5; maxThreads: 1000
Oct-22 12:17:27.368 [main] DEBUG nextflow.Session - Session start
Oct-22 12:17:27.371 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow started -- trace file: /users/as3243/my_virome_pipeline/results_20251022_121724/pipeline_info/execution_trace.txt
Oct-22 12:17:28.108 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Oct-22 12:17:28.131 [main] INFO  nextflow.Nextflow - âœ“ Parameter validation passed
Oct-22 12:17:28.133 [main] INFO  nextflow.Nextflow - 
=========================================
 VIROME ANALYSIS PIPELINE v2.0
=========================================
Input directory     : /users/as3243/scratch/test_prep
Output directory    : results_20251022_121724
GeNomad database    : /mnt/scratch/projects/biol-soilv-2024/databases/genomad_db
iPHoP database      : /mnt/scratch/projects/biol-soilv-2024/virome_assembly/iphop_db/Aug_2023_pub_rw
BACPHLIP hmmsearch  : /mnt/scratch/users/as3243/miniconda/envs/bacphlip/bin/hmmsearch
ClusterONE JAR      : /mnt/scratch/users/as3243/miniconda/envs/vcontact2/lib/cluster_one-v1.0.jar
Max memory          : 120.GB
Max CPUs            : 32
Max time            : 48.h
=========================================

Oct-22 12:17:28.294 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:RUN_GENOMAD` matches process RUN_GENOMAD
Oct-22 12:17:28.309 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
Oct-22 12:17:28.309 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
Oct-22 12:17:28.318 [main] DEBUG nextflow.executor.Executor - [warm up] executor > slurm
Oct-22 12:17:28.326 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'slurm' > capacity: 20; pollInterval: 5s; dumpInterval: 5m 
Oct-22 12:17:28.327 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: slurm)
Oct-22 12:17:28.328 [main] DEBUG n.processor.TaskPollingMonitor - Creating submit rate limit of 10 submissions per 1 seconds
Oct-22 12:17:28.331 [main] DEBUG n.executor.AbstractGridExecutor - Creating executor 'slurm' > queue-stat-interval: 1m
Oct-22 12:17:28.355 [main] DEBUG nextflow.processor.TaskProcessor - Creating process 'RUN_GENOMAD': maxForks=0; fair=false; array=0
Oct-22 12:17:28.390 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:RUN_CHECKV` matches process RUN_CHECKV
Oct-22 12:17:28.392 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
Oct-22 12:17:28.392 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
Oct-22 12:17:28.393 [main] DEBUG nextflow.processor.TaskProcessor - Creating process 'RUN_CHECKV': maxForks=0; fair=false; array=0
Oct-22 12:17:28.400 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:RUN_IPHOP` matches process RUN_IPHOP
Oct-22 12:17:28.401 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
Oct-22 12:17:28.401 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
Oct-22 12:17:28.402 [main] DEBUG nextflow.processor.TaskProcessor - Creating process 'RUN_IPHOP': maxForks=0; fair=false; array=0
Oct-22 12:17:28.408 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:RUN_BACPHLIP` matches process RUN_BACPHLIP
Oct-22 12:17:28.409 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
Oct-22 12:17:28.410 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
Oct-22 12:17:28.410 [main] DEBUG nextflow.processor.TaskProcessor - Creating process 'RUN_BACPHLIP': maxForks=0; fair=false; array=0
Oct-22 12:17:28.416 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:RUN_VCONTACT2` matches process RUN_VCONTACT2
Oct-22 12:17:28.418 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
Oct-22 12:17:28.418 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
Oct-22 12:17:28.419 [main] DEBUG nextflow.processor.TaskProcessor - Creating process 'RUN_VCONTACT2': maxForks=0; fair=false; array=0
Oct-22 12:17:28.433 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: RUN_VCONTACT2, RUN_IPHOP, RUN_CHECKV, RUN_BACPHLIP, RUN_GENOMAD
Oct-22 12:17:28.436 [main] DEBUG nextflow.Session - Igniting dataflow network (6)
Oct-22 12:17:28.440 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /users/as3243/scratch/test_prep/; pattern: *.fasta; options: [:]
Oct-22 12:17:28.441 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > RUN_GENOMAD
Oct-22 12:17:28.441 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > RUN_CHECKV
Oct-22 12:17:28.441 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > RUN_IPHOP
Oct-22 12:17:28.441 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > RUN_BACPHLIP
Oct-22 12:17:28.441 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > RUN_VCONTACT2
Oct-22 12:17:28.442 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_b049dab1315860f9: /users/as3243/my_virome_pipeline/main.nf
Oct-22 12:17:28.442 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Oct-22 12:17:28.442 [main] DEBUG nextflow.Session - Session await
Oct-22 12:17:28.453 [Actor Thread 1] INFO  nextflow.Nextflow - Processing sample: scaffolds (/users/as3243/scratch/test_prep/scaffolds.fasta)
Oct-22 12:17:28.552 [Actor Thread 3] DEBUG nextflow.conda.CondaCache - mamba found local env for environment=genomad; path=/users/as3243/.conda/nextflow/env-e8f7de97a875c34e459766f1c3bf24ff
Oct-22 12:17:28.675 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process RUN_GENOMAD (scaffolds) > jobId: 25575167; workDir: /users/as3243/my_virome_pipeline/work/31/9794f683cdacc2bf8d2715ca502322
Oct-22 12:17:28.676 [Task submitter] INFO  nextflow.Session - [31/9794f6] Submitted process > RUN_GENOMAD (scaffolds)
Oct-22 12:20:28.365 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 25575167; id: 1; name: RUN_GENOMAD (scaffolds); status: COMPLETED; exit: 0; error: -; workDir: /users/as3243/my_virome_pipeline/work/31/9794f683cdacc2bf8d2715ca502322 started: 1761131883339; exited: 2025-10-22T11:20:15.929330106Z; ]
Oct-22 12:20:28.378 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=12; workQueue=LinkedBlockingQueue[-1]; allowCoreThreadTimeout=false
Oct-22 12:20:28.457 [Actor Thread 1] INFO  nextflow.conda.CondaCache - Creating env using mamba: checkv [cache /users/as3243/.conda/nextflow/env-4d8a524f3be2a692b01303de37056701]
Oct-22 12:20:28.464 [TaskFinalizer-1] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'PublishDir' minSize=10; maxSize=12; workQueue=LinkedBlockingQueue[-1]; allowCoreThreadTimeout=false
Oct-22 12:21:23.825 [Actor Thread 1] DEBUG nextflow.conda.CondaCache - 'mamba' create complete env=checkv path=/users/as3243/.conda/nextflow/env-4d8a524f3be2a692b01303de37056701
Oct-22 12:21:23.861 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process RUN_CHECKV (scaffolds) > jobId: 25575329; workDir: /users/as3243/my_virome_pipeline/work/e3/4703a622509666e5bb95917121cac5
Oct-22 12:21:23.862 [Task submitter] INFO  nextflow.Session - [e3/4703a6] Submitted process > RUN_CHECKV (scaffolds)
Oct-22 12:22:28.363 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 25575329; id: 2; name: RUN_CHECKV (scaffolds); status: COMPLETED; exit: 1; error: -; workDir: /users/as3243/my_virome_pipeline/work/e3/4703a622509666e5bb95917121cac5 started: 1761132118360; exited: 2025-10-22T11:22:05.2404162Z; ]
Oct-22 12:22:28.369 [TaskFinalizer-2] DEBUG nextflow.processor.TaskProcessor - Handling unexpected condition for
  task: name=RUN_CHECKV (scaffolds); work-dir=/users/as3243/my_virome_pipeline/work/e3/4703a622509666e5bb95917121cac5
  error [nextflow.exception.ProcessFailedException]: Process `RUN_CHECKV (scaffolds)` terminated with an error exit status (1)
Oct-22 12:22:28.387 [TaskFinalizer-2] INFO  nextflow.processor.TaskProcessor - [e3/4703a6] NOTE: Process `RUN_CHECKV (scaffolds)` terminated with an error exit status (1) -- Execution is retried (1)
Oct-22 12:22:28.431 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process RUN_CHECKV (scaffolds) > jobId: 25575372; workDir: /users/as3243/my_virome_pipeline/work/3a/26109ed7502403d8590a767ad17751
Oct-22 12:22:28.432 [Task submitter] INFO  nextflow.Session - [3a/26109e] Re-submitted process > RUN_CHECKV (scaffolds)
Oct-22 12:22:33.363 [Task monitor] DEBUG n.processor.TaskPollingMonitor - !! executor slurm > tasks to be completed: 1 -- submitted tasks are shown below
~> TaskHandler[jobId: 25575372; id: 3; name: RUN_CHECKV (scaffolds); status: SUBMITTED; exit: -; error: -; workDir: /users/as3243/my_virome_pipeline/work/3a/26109ed7502403d8590a767ad17751 started: -; exited: -; ]
Oct-22 12:22:38.213 [SIGINT handler] DEBUG nextflow.Session - Session aborted -- Cause: SIGINT
Oct-22 12:22:38.233 [SIGINT handler] DEBUG nextflow.Session - The following nodes are still active:
[process] RUN_IPHOP
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] RUN_BACPHLIP
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] RUN_VCONTACT2
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

Oct-22 12:22:38.239 [SIGINT handler] ERROR nextflow.Nextflow - 
=========================================
 PIPELINE EXECUTION FAILED
=========================================
Error message: SIGINT
Exit status: null
Work directory: /users/as3243/my_virome_pipeline/work

Check the log files in the work directory for more details.
=========================================

Oct-22 12:22:38.240 [main] DEBUG nextflow.Session - Session await > all processes finished
Oct-22 12:22:38.241 [main] DEBUG nextflow.Session - Session await > all barriers passed
Oct-22 12:22:38.241 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: slurm) - terminating tasks monitor poll loop
Oct-22 12:22:38.248 [main] INFO  nextflow.Nextflow - 
=========================================
 VIROME PIPELINE COMPLETED
=========================================
Status:     FAILED
Duration:   5m 11s
CPU hours:  0.3 (9.9% failed)
Work dir:   /users/as3243/my_virome_pipeline/work
Exit status: null
Error report: SIGINT
=========================================
Results directory: results_20251022_121724

Generated outputs:
- GeNomad results: virus identification and annotation
- CheckV results: virus quality assessment  
- iPHoP results: host prediction
- BACPHLIP results: lifestyle prediction
- vConTACT2 results: viral clustering

Reports available in: results_20251022_121724/pipeline_info/
=========================================

Oct-22 12:22:38.251 [main] WARN  n.processor.TaskPollingMonitor - Killing running tasks (1)
Oct-22 12:22:38.268 [main] DEBUG n.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=1; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=1; runningCount=-1; retriesCount=1; abortedCount=1; succeedDuration=18m 12s; failedDuration=2m; cachedDuration=0ms;loadCpus=-8; loadMemory=0; peakRunning=1; peakCpus=8; peakMemory=32 GB; ]
Oct-22 12:22:38.268 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow completed -- saving trace file
Oct-22 12:22:38.269 [main] DEBUG nextflow.trace.ReportObserver - Workflow completed -- rendering execution report
Oct-22 12:22:38.748 [main] DEBUG nextflow.trace.TimelineObserver - Workflow completed -- rendering execution timeline
Oct-22 12:22:38.832 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Oct-22 12:22:38.845 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
